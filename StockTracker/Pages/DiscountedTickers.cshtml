@page
@model StockTracker.DiscountedTickersModel
@{
    ViewData["Title"] = "DiscountedTickers";
}

<div id="container">
    <div id="inputDiv" style="width: 100%; height: 20%">
        <form id="FormInfo">
            <div class="form-group">
                <label for="StockTicker">Minimum Percentage Fallen</label>
                <input type="text" class="form-control" id="PercentageInput" placeholder="Enter Percentage" style="width:20%">
            </div>
            <div class="form-group">
                <label for="TradingDays">How Many Days? (Note: Includes weekends)</label>
                <input type="number" class="form-control" id="DaysInput" placeholder="Trading Days" style="width:20%">
            </div>
            <button type="submit" class="btn btn-primary" id="SearchInfoBtn">Search</button>
        </form>
    </div>
</div>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script>
    $(document).ready(function (e) {
        $("#SearchInfoBtn").click(function (e) {
            e.preventDefault();
            ajax_GetDiscountedPrices($("#PercentageInput").val(), $("#DaysInput").val());
        });
    });

    // function to update our chart                                                                                              
    function ajax_GetDiscountedPrices(percentageVar, dayCountVar) {
        $.ajax({
            type: "GET",
            url: "/DiscountedTickers?handler=Discounts",
            data: { percent: percentageVar, dayCount: dayCountVar },
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
            }
        }).done(function (data) {
            debugger;
        })
    }
</script>
